{% extends 'base.html' %} {% block content %}
<!-- Content -->
<div class="w-full pt-10 px-4 sm:px-6 md:px-8 lg:pl-72">
  <!-- Page Heading -->
  {% for message in get_flashed_messages() %}
  <div
    id="dismiss-alert"
    class="hs-removing:translate-x-5 hs-removing:opacity-0 transition duration-300 bg-teal-50 border border-teal-200 rounded-md p-4"
    role="alert"
  >
    <div class="flex">
      <div class="flex-shrink-0">
        <svg
          class="h-4 w-4 text-blue-500 mt-0.5"
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          viewBox="0 0 16 16"
        >
          <path
            d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"
          />
        </svg>
      </div>
      <div class="ml-3">
        <div class="text-sm text-teal-800 font-medium">{{ message }}</div>
      </div>
      <div class="pl-3 ml-auto">
        <div class="-mx-1.5 -my-1.5">
          <button
            type="button"
            class="inline-flex bg-teal-50 rounded-md p-1.5 text-teal-500 hover:bg-teal-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-teal-50 focus:ring-teal-600"
            data-hs-remove-element="#dismiss-alert"
          >
            <span class="sr-only">Dismiss</span>
            <svg
              class="h-3 w-3"
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              aria-hidden="true"
            >
              <path
                d="M0.92524 0.687069C1.126 0.486219 1.39823 0.373377 1.68209 0.373377C1.96597 0.373377 2.2382 0.486219 2.43894 0.687069L8.10514 6.35813L13.7714 0.687069C13.8701 0.584748 13.9882 0.503105 14.1188 0.446962C14.2494 0.39082 14.3899 0.361248 14.5321 0.360026C14.6742 0.358783 14.8151 0.38589 14.9468 0.439762C15.0782 0.493633 15.1977 0.573197 15.2983 0.673783C15.3987 0.774389 15.4784 0.894026 15.5321 1.02568C15.5859 1.15736 15.6131 1.29845 15.6118 1.44071C15.6105 1.58297 15.5809 1.72357 15.5248 1.85428C15.4688 1.98499 15.3872 2.10324 15.2851 2.20206L9.61883 7.87312L15.2851 13.5441C15.4801 13.7462 15.588 14.0168 15.5854 14.2977C15.5831 14.5787 15.4705 14.8474 15.272 15.046C15.0735 15.2449 14.805 15.3574 14.5244 15.3599C14.2437 15.3623 13.9733 15.2543 13.7714 15.0591L8.10514 9.38812L2.43894 15.0591C2.23704 15.2543 1.96663 15.3623 1.68594 15.3599C1.40526 15.3574 1.13677 15.2449 0.938279 15.046C0.739807 14.8474 0.627232 14.5787 0.624791 14.2977C0.62235 14.0168 0.730236 13.7462 0.92524 13.5441L6.59144 7.87312L0.92524 2.20206C0.724562 2.00115 0.611816 1.72867 0.611816 1.44457C0.611816 1.16047 0.724562 0.887983 0.92524 0.687069Z"
                fill="currentColor"
              />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  <header>
    <div class="flex items-center flex-col">
      <h1
        class="block justify-center text-2xl font-bold text-gray-800 sm:text-3xl dark:text-white"
      >
        Manage Your Loans
      </h1>
      <p class="mt-2 justify-center text-lg text-gray-800 dark:text-gray-400">
        Accept loan applications, delete created loans, and view loans you've sent
        applications.
      </p>
    </div>
  </header>
  <!-- End Page Heading -->

  <section class="mt-10">
    <h3 class="block text-xl font-bold text-gray-800 sm:text-l dark:text-white">
      Loans created by you
    </h3>
    <!-- Card Blog -->
    <div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
      <!-- Grid -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Card -->

        {% if loans %} {% for loan in loans %}
        <div
          class="group flex flex-col h-full bg-white border border-gray-200 shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-700 dark:shadow-slate-700/[.7]"
        >
          <div
            class="h-52 flex flex-col justify-center items-center bg-blue-600 rounded-t-xl"
          >
            <svg
              class="w-28 h-28"
              width="56"
              height="56"
              viewBox="0 0 56 56"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect width="56" height="56" rx="10" fill="white" />
              <path
                d="M20.2819 26.7478C20.1304 26.5495 19.9068 26.4194 19.6599 26.386C19.4131 26.3527 19.1631 26.4188 18.9647 26.5698C18.848 26.6622 18.7538 26.78 18.6894 26.9144L10.6019 43.1439C10.4874 43.3739 10.4686 43.6401 10.5496 43.884C10.6307 44.1279 10.805 44.3295 11.0342 44.4446C11.1681 44.5126 11.3163 44.5478 11.4664 44.5473H22.7343C22.9148 44.5519 23.0927 44.5037 23.2462 44.4084C23.3998 44.3132 23.5223 44.1751 23.5988 44.011C26.0307 38.9724 24.5566 31.3118 20.2819 26.7478Z"
                fill="url(#paint0_linear_2204_541)"
              />
              <path
                d="M28.2171 11.9791C26.201 15.0912 25.026 18.6755 24.8074 22.3805C24.5889 26.0854 25.3342 29.7837 26.9704 33.1126L32.403 44.0113C32.4833 44.1724 32.6067 44.3079 32.7593 44.4026C32.912 44.4973 33.088 44.5475 33.2675 44.5476H44.5331C44.6602 44.5479 44.7861 44.523 44.9035 44.4743C45.0209 44.4257 45.1276 44.3543 45.2175 44.2642C45.3073 44.1741 45.3785 44.067 45.427 43.9492C45.4755 43.8314 45.5003 43.7052 45.5 43.5777C45.5001 43.4274 45.4659 43.2791 45.3999 43.1441L29.8619 11.9746C29.7881 11.8184 29.6717 11.6864 29.5261 11.594C29.3805 11.5016 29.2118 11.4525 29.0395 11.4525C28.8672 11.4525 28.6984 11.5016 28.5529 11.594C28.4073 11.6864 28.2908 11.8184 28.2171 11.9746V11.9791Z"
                fill="#2684FF"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_2204_541"
                  x1="24.734"
                  y1="29.2284"
                  x2="16.1543"
                  y2="44.0429"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stop-color="#0052CC" />
                  <stop offset="0.92" stop-color="#2684FF" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="p-4 md:p-6">
            {% if loan.status == "OPEN" %}
            <span
              class="block mb-1 text-xs font-semibold uppercase text-green-600 dark:text-green-500"
            >
              {{ loan.status }}
            </span>
            {% else %}
            <span
              class="block mb-1 text-xs font-semibold uppercase text-red-600 dark:text-red-500"
            >
              {{ loan.status }}
            </span>
            {% endif %}
            <h3
              class="text-sm font-semibold text-slate-500 dark:text-gray-300 dark:hover:text-white"
            >
              SHORT-TERM LOAN
            </h3>
            <h3
              class="text-xl font-semibold text-gray-800 dark:text-gray-300 dark:hover:text-white"
            >
              &#8358;{{ loan.amount }}
            </h3>
            <p class="mt-3 text-gray-700">
              Pay {{ loan.interest }}% interest for a duration of {{
              loan.duration }} days.
            </p>
          </div>

          <div
            class="mt-auto flex border-t border-gray-200 divide-x divide-gray-200 dark:border-gray-700 dark:divide-gray-700"
          >
            <a
              class="w-full py-3 px-4 inline-flex justify-center items-center gap-2 rounded-bl-xl font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-green-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm sm:p-4 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800"
              href="{{ url_for('dashboard.view_applications', loan_id=loan.id) }}"
            >
              View Applications
            </a>
            <a
              class="w-full py-3 px-4 inline-flex justify-center items-center gap-2 rounded-br-xl font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-red-600 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm sm:p-4 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800"
              href="#"
            >
              Delete Loan
            </a>
          </div>
        </div>
        {% endfor %} {% else %}
        <div
          class="min-h-[15rem] flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]"
        >
          <div
            class="flex flex-auto flex-col justify-center items-center p-4 md:p-5"
          >
            <svg
              class="max-w-[5rem]"
              viewBox="0 0 375 428"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M254.509 253.872L226.509 226.872"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <path
                d="M237.219 54.3721C254.387 76.4666 264.609 104.226 264.609 134.372C264.609 206.445 206.182 264.872 134.109 264.872C62.0355 264.872 3.60864 206.445 3.60864 134.372C3.60864 62.2989 62.0355 3.87207 134.109 3.87207C160.463 3.87207 184.993 11.6844 205.509 25.1196"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <rect
                x="270.524"
                y="221.872"
                width="137.404"
                height="73.2425"
                rx="36.6212"
                transform="rotate(40.8596 270.524 221.872)"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <ellipse
                cx="133.109"
                cy="404.372"
                rx="121.5"
                ry="23.5"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <path
                d="M111.608 188.872C120.959 177.043 141.18 171.616 156.608 188.872"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <ellipse
                cx="96.6084"
                cy="116.872"
                rx="9"
                ry="12"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <ellipse
                cx="172.608"
                cy="117.872"
                rx="9"
                ry="12"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <path
                d="M194.339 147.588C189.547 148.866 189.114 142.999 189.728 138.038C189.918 136.501 191.738 135.958 192.749 137.131C196.12 141.047 199.165 146.301 194.339 147.588Z"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
            </svg>
            <p class="mt-5 text-sm text-gray-500 dark:text-gray-500">
              No data to show
            </p>
          </div>
        </div>
        {% endif %}
        <!-- End Card -->
      </div>
      <!-- End Grid -->
    </div>
    <!-- End Card Blog -->
  </section>

  <section class="mt-10">
    <h3 class="block text-l font-bold text-gray-800 sm:text-l dark:text-white">
      Loans you've sent applications
    </h3>
    <!-- Card Blog -->
    <div class="max-w-[85rem] px-4 py-10 sm:px-6 lg:px-8 lg:py-14 mx-auto">
      <!-- Grid -->
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Card -->

        {% if applications %} {% for application in applications %}
        <div
          class="group flex flex-col h-full bg-white border border-gray-200 shadow-sm rounded-xl dark:bg-slate-900 dark:border-gray-700 dark:shadow-slate-700/[.7]"
        >
          <div
            class="h-52 flex flex-col justify-center items-center bg-blue-600 rounded-t-xl"
          >
            <svg
              class="w-28 h-28"
              width="56"
              height="56"
              viewBox="0 0 56 56"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect width="56" height="56" rx="10" fill="white" />
              <path
                d="M20.2819 26.7478C20.1304 26.5495 19.9068 26.4194 19.6599 26.386C19.4131 26.3527 19.1631 26.4188 18.9647 26.5698C18.848 26.6622 18.7538 26.78 18.6894 26.9144L10.6019 43.1439C10.4874 43.3739 10.4686 43.6401 10.5496 43.884C10.6307 44.1279 10.805 44.3295 11.0342 44.4446C11.1681 44.5126 11.3163 44.5478 11.4664 44.5473H22.7343C22.9148 44.5519 23.0927 44.5037 23.2462 44.4084C23.3998 44.3132 23.5223 44.1751 23.5988 44.011C26.0307 38.9724 24.5566 31.3118 20.2819 26.7478Z"
                fill="url(#paint0_linear_2204_541)"
              />
              <path
                d="M28.2171 11.9791C26.201 15.0912 25.026 18.6755 24.8074 22.3805C24.5889 26.0854 25.3342 29.7837 26.9704 33.1126L32.403 44.0113C32.4833 44.1724 32.6067 44.3079 32.7593 44.4026C32.912 44.4973 33.088 44.5475 33.2675 44.5476H44.5331C44.6602 44.5479 44.7861 44.523 44.9035 44.4743C45.0209 44.4257 45.1276 44.3543 45.2175 44.2642C45.3073 44.1741 45.3785 44.067 45.427 43.9492C45.4755 43.8314 45.5003 43.7052 45.5 43.5777C45.5001 43.4274 45.4659 43.2791 45.3999 43.1441L29.8619 11.9746C29.7881 11.8184 29.6717 11.6864 29.5261 11.594C29.3805 11.5016 29.2118 11.4525 29.0395 11.4525C28.8672 11.4525 28.6984 11.5016 28.5529 11.594C28.4073 11.6864 28.2908 11.8184 28.2171 11.9746V11.9791Z"
                fill="#2684FF"
              />
              <defs>
                <linearGradient
                  id="paint0_linear_2204_541"
                  x1="24.734"
                  y1="29.2284"
                  x2="16.1543"
                  y2="44.0429"
                  gradientUnits="userSpaceOnUse"
                >
                  <stop stop-color="#0052CC" />
                  <stop offset="0.92" stop-color="#2684FF" />
                </linearGradient>
              </defs>
            </svg>
          </div>
          <div class="p-4 md:p-6">
            {% if application.status == "OPEN" %}
            <span
              class="block mb-1 text-xs font-semibold uppercase text-green-600 dark:text-green-500"
            >
              {{ application.status }}
            </span>
            {% else %}
            <span
              class="block mb-1 text-xs font-semibold uppercase text-red-600 dark:text-red-500"
            >
              {{ application.status }}
            </span>
            {% endif %}
            <h3
              class="text-sm font-semibold text-slate-500 dark:text-gray-300 dark:hover:text-white"
            >
              SHORT-TERM LOAN
            </h3>
            <h3
            class="text-xl font-semibold text-gray-800 dark:text-gray-300 dark:hover:text-white"
          >
            &#8358;{{ application.amount }}
          </h3>
            <p class="mt-3 text-gray-700">
              Pay {{ application.interest }}% interest for a duration of {{
              application.duration }} days.
            </p>
          </div>
          <div
            class="mt-auto flex border-t border-gray-200 divide-x divide-gray-200 dark:border-gray-700 dark:divide-gray-700"
          >
            <a
              class="w-full py-3 px-4 inline-flex justify-center items-center gap-2 rounded-bl-xl font-medium bg-white text-gray-700 shadow-sm align-middle hover:bg-green-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white focus:ring-blue-600 transition-all text-sm sm:p-4 dark:bg-slate-900 dark:hover:bg-slate-800 dark:border-gray-700 dark:text-gray-400 dark:hover:text-white dark:focus:ring-offset-gray-800"
              href="{{ url_for('dashboard.repay_details', loan_id=application.applications[0].loan_id ) }}"
            >
              Repay Loan
            </a>
          </div>
        </div>
        {% endfor %} {% else %}
        <div
          class="min-h-[15rem] flex flex-col bg-white border shadow-sm rounded-xl dark:bg-gray-800 dark:border-gray-700 dark:shadow-slate-700/[.7]"
        >
          <div
            class="flex flex-auto flex-col justify-center items-center p-4 md:p-5"
          >
            <svg
              class="max-w-[5rem]"
              viewBox="0 0 375 428"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M254.509 253.872L226.509 226.872"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <path
                d="M237.219 54.3721C254.387 76.4666 264.609 104.226 264.609 134.372C264.609 206.445 206.182 264.872 134.109 264.872C62.0355 264.872 3.60864 206.445 3.60864 134.372C3.60864 62.2989 62.0355 3.87207 134.109 3.87207C160.463 3.87207 184.993 11.6844 205.509 25.1196"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <rect
                x="270.524"
                y="221.872"
                width="137.404"
                height="73.2425"
                rx="36.6212"
                transform="rotate(40.8596 270.524 221.872)"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <ellipse
                cx="133.109"
                cy="404.372"
                rx="121.5"
                ry="23.5"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <path
                d="M111.608 188.872C120.959 177.043 141.18 171.616 156.608 188.872"
                class="stroke-gray-400 dark:stroke-white"
                stroke="currentColor"
                stroke-width="7"
                stroke-linecap="round"
              />
              <ellipse
                cx="96.6084"
                cy="116.872"
                rx="9"
                ry="12"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <ellipse
                cx="172.608"
                cy="117.872"
                rx="9"
                ry="12"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
              <path
                d="M194.339 147.588C189.547 148.866 189.114 142.999 189.728 138.038C189.918 136.501 191.738 135.958 192.749 137.131C196.12 141.047 199.165 146.301 194.339 147.588Z"
                class="fill-gray-400 dark:fill-white"
                fill="currentColor"
              />
            </svg>
            <p class="mt-5 text-sm text-gray-500 dark:text-gray-500">
              No data to show
            </p>
          </div>
        </div>
        {% endif %}
        <!-- End Card -->
      </div>
      <!-- End Grid -->
    </div>
    <!-- End Card Blog -->
  </section>
  <!-- ========== END MAIN CONTENT ========== -->
</div>

{% endblock content %}
